<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Process Maturity</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #2c3e50;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 1.5rem 1rem;
    }

    .hero {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 2rem;
      animation: fadeIn 0.6s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Navigation */
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .nav-button {
      display: inline-flex;
      align-items: center;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .nav-button.secondary {
      background: #f8f9fa;
      color: #495057;
      border: 2px solid #dee2e6;
    }

    .nav-button.secondary:hover {
      background: #e9ecef;
      transform: translateX(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .nav-button.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
    }

    .nav-button.primary:hover {
      transform: translateX(3px);
      box-shadow: 0 6px 12px rgba(118, 75, 162, 0.4);
    }

    /* Debug Panel */
    .debug-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      border: 2px solid #667eea;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      max-width: 300px;
      z-index: 1000;
    }

    .debug-panel h3 {
      margin-bottom: 0.5rem;
      color: #667eea;
      font-size: 0.9rem;
    }

    .debug-content {
      font-size: 0.85rem;
      color: #495057;
      max-height: 200px;
      overflow-y: auto;
    }

    .debug-item {
      padding: 0.5rem;
      margin: 0.25rem 0;
      background: #f8f9fa;
      border-radius: 6px;
      border-left: 3px solid #667eea;
    }

    .debug-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #667eea;
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      z-index: 999;
    }

    .debug-toggle:hover {
      background: #764ba2;
    }

    /* Header Section */
    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .section-intro {
      font-size: 1.05rem;
      color: #6c757d;
      line-height: 1.6;
      margin-bottom: 2rem;
      max-width: 900px;
      padding: 1.25rem;
      background: #f8f9fa;
      border-left: 4px solid #667eea;
      border-radius: 8px;
    }

    /* Table Styling */
    .table-wrapper {
      overflow-x: auto;
      margin-top: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      margin-bottom: 2rem;
    }

    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      background: white;
    }

    thead {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    th {
      padding: 1.25rem 1.25rem;
      text-align: left;
      font-weight: 700;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    th:first-child {
      border-top-left-radius: 12px;
      width: 40%;
    }

    th:last-child {
      border-top-right-radius: 12px;
    }

    th:nth-child(2),
    th:nth-child(3) {
      width: 30%;
    }

    tbody tr {
      transition: all 0.3s ease;
      border-bottom: 1px solid #e9ecef;
    }

    tbody tr:hover {
      background: #f8f9fa;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    tbody tr:last-child {
      border-bottom: none;
    }

    td {
      padding: 1.5rem 1.25rem;
      vertical-align: top;
      font-size: 0.9rem;
    }

    td:first-child {
      font-weight: 600;
      color: #2c3e50;
      line-height: 1.5;
    }

    /* Select Container */
    .select-container {
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    /* Status Indicator Circle */
    .status-indicator {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      opacity: 0;
      transform: scale(0);
      transition: all 0.3s ease;
      flex-shrink: 0;
      align-self: flex-start;
    }

    .status-indicator.show {
      opacity: 1;
      transform: scale(1);
    }

    .status-indicator.level-1 { background: #dc3545; }
    .status-indicator.level-2 { background: #fd7e14; }
    .status-indicator.level-3 { background: #ffc107; }
    .status-indicator.level-4 { background: #90ee90; }
    .status-indicator.level-5 { background: #28a745; }

    /* Select Dropdown Styling */
    select {
      width: 100%;
      padding: 0.875rem 1rem;
      font-size: 0.9rem;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      background: white;
      color: #495057;
      cursor: pointer;
      transition: all 0.3s ease;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23667eea' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.75rem center;
      background-size: 1.25rem;
      padding-right: 3rem;
      line-height: 1.4;
    }

    select:hover {
      border-color: #667eea;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
    }

    select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    select option {
      padding: 1rem;
    }

    /* Legend/Key Styling */
    .legend {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      margin-top: 2rem;
      padding: 1.25rem;
      background: #f8f9fa;
      border-radius: 12px;
      flex-wrap: wrap;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      border-top: 3px solid #667eea;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      font-size: 0.95rem;
      color: #495057;
    }

    .legend-circle {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .legend-circle.red { background: #dc3545; }
    .legend-circle.orange { background: #fd7e14; }
    .legend-circle.yellow { background: #ffc107; }
    .legend-circle.light-green { background: #90ee90; }
    .legend-circle.dark-green { background: #28a745; }

    /* Responsive Design */
    @media (max-width: 768px) {
      .debug-panel, .debug-toggle {
        bottom: 10px;
        right: 10px;
      }
    }
  </style>
</head>
<body>
  <main class="hero wide">
    <!-- Navigation -->
    <div class="nav-buttons">
      <a href="organisational-capability.html" class="nav-button secondary">← Back</a>
      <a href="supply-chain-readiness.html" class="nav-button primary">Next →</a>
    </div>

    <!-- Header -->
    <h1>Process Maturity</h1>
    <p class="section-intro">
      This section evaluates the maturity and robustness of your organisation's processes 
      for delivering Passivhaus (PH) or Ultra-Low Energy (ULE) social housing.
    </p>

    <!-- Table -->
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Question</th>
            <th>Now - <i>Observer</i></th>
            <th>Future - <i>Effective Deliverer</i></th>
          </tr>
        </thead>
        <tbody>
          <!-- Question 1: Process documentation -->
          <tr>
            <td>
              Does your organisation have documented processes that embed PH/ULE delivery requirements across all project stages?
            </td>
            <td>
              <div class="select-container">
                <select id="q10-now" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">Processes are undocumented or generic; no PH/ULE requirements.</option>
                  <option value="2">Some documentation exists; PH/ULE requirements are partially considered.</option>
                  <option value="3">Standardised processes are in place across key phases (design, procurement, construction, commissioning) with PH/ULE principles embedded.</option>
                  <option value="4">Processes are well-defined, aligned with frameworks like the RIBA overlay, and consistently applied across projects.</option>
                  <option value="5">Organisation leads in developing PH/ULE-specific process documentation; processes are continuously optimised, shared across the sector, and set benchmarks for the industry.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
            <td>
              <div class="select-container">
                <select id="q10-future" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">Processes are undocumented or generic; no PH/ULE requirements.</option>
                  <option value="2">Some documentation exists; PH/ULE requirements are partially considered.</option>
                  <option value="3">Standardised processes are in place across key phases (design, procurement, construction, commissioning) with PH/ULE principles embedded.</option>
                  <option value="4">Processes are well-defined, aligned with frameworks like the RIBA overlay, and consistently applied across projects.</option>
                  <option value="5">Organisation leads in developing PH/ULE-specific process documentation; processes are continuously optimised, shared across the sector, and set benchmarks for the industry.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
          </tr>

          <!-- Question 2: Project management -->
          <tr>
            <td>
              How well prepared is your organisation to manage Time, Cost, and Scope (TCS) of PH/ULE projects?
            </td>
            <td>
              <div class="select-container">
                <select id="q11-now" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">TCS management is informal or reactive.</option>
                  <option value="2">Basic project planning exists; limited control over TCS.</option>
                  <option value="3">Structured project management with defined TCS controls and some contractual clarity.</option>
                  <option value="4">Robust TCS management and transparent contracts. PH/ULE requirements are well integrated.</option>
                  <option value="5">Advanced project controls and agile delivery models. Continuously improves TCS performance and shares learning across the sector.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
            <td>
              <div class="select-container">
                <select id="q11-future" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">TCS management is informal or reactive.</option>
                  <option value="2">Basic project planning exists; limited control over TCS.</option>
                  <option value="3">Structured project management with defined TCS controls and some contractual clarity.</option>
                  <option value="4">Robust TCS management and transparent contracts. PH/ULE requirements are well integrated.</option>
                  <option value="5">Advanced project controls and agile delivery models. Continuously improves TCS performance and shares learning across the sector.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
          </tr>

          <!-- Question 3: Risk management -->
          <tr>
            <td>
              How effectively does your organisation identify, assess, and mitigate PH/ULE-specific risks (e.g., design detailing, cost overruns, supply chain gaps)?
            </td>
            <td>
              <div class="select-container">
                <select id="q12-now" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">Risk-averse; no formal risk approach; risks are not identified or managed.</option>
                  <option value="2">Some awareness of PH/ULE risks; limited clarity on acceptable risk levels or mitigation strategies.</option>
                  <option value="3">Risks are identified and monitored; mitigation strategies are in place and aligned with project goals.</option>
                  <option value="4">Risk appetite is strategic and forward-looking. Proactive identification and structured mitigation of PH/ULE-specific risks (e.g. design, cost, supply chain).</option>
                  <option value="5">Risk is controlled and reduced through expansive and lessons learned, influences industry standards, and applies innovative approaches to balancing risk and opportunity, including scenario planning, shared learning from past projects, and influencing wider industry approaches to PH/ULE risk.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
            <td>
              <div class="select-container">
                <select id="q12-future" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">Risk-averse; no formal risk approach; risks are not identified or managed.</option>
                  <option value="2">Some awareness of PH/ULE risks; limited clarity on acceptable risk levels or mitigation strategies.</option>
                  <option value="3">Risks are identified and monitored; mitigation strategies are in place and aligned with project goals.</option>
                  <option value="4">Risk appetite is strategic and forward-looking. Proactive identification and structured mitigation of PH/ULE-specific risks (e.g. design, cost, supply chain).</option>
                  <option value="5">Risk is controlled and reduced through expansive and lessons learned, influences industry standards, and applies innovative approaches to balancing risk and opportunity, including scenario planning, shared learning from past projects, and influencing wider industry approaches to PH/ULE risk.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
          </tr>

          <!-- Question 4: Post occupancy management -->
          <tr>
            <td>
              Do you have a resident engagement plan in place to gather feedback after PH/ULE housing is occupied?
            </td>
            <td>
              <div class="select-container">
                <select id="q13-now" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">No formal post-occupancy strategy. Limited tenant engagement or feedback collection.</option>
                  <option value="2">Basic handover support; limited tenant education or feedback collection.</option>
                  <option value="3">Structured Soft Landings plan; some tenant liaison and feedback processes in place.</option>
                  <option value="4">Clear engagement strategy (e.g., Soft Landings, Landlord and Tenant Liaison Plans); proactive education and feedback used to improve performance.</option>
                  <option value="5">Fully integrated post-occupancy framework, sector-leading engagement and feedback systems that inform future design and delivery.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
            <td>
              <div class="select-container">
                <select id="q13-future" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">No formal post-occupancy strategy. Limited tenant engagement or feedback collection.</option>
                  <option value="2">Basic handover support; limited tenant education or feedback collection.</option>
                  <option value="3">Structured Soft Landings plan; some tenant liaison and feedback processes in place.</option>
                  <option value="4">Clear engagement strategy (e.g., Soft Landings, Landlord and Tenant Liaison Plans); proactive education and feedback used to improve performance.</option>
                  <option value="5">Fully integrated post-occupancy framework, sector-leading engagement and feedback systems that inform future design and delivery.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
          </tr>

          <!-- Question 5: Monitoring, feedback & iteration mechanisms -->
          <tr>
            <td>
              Do you have a monitoring plan in place to collect POE data?
            </td>
            <td>
              <div class="select-container">
                <select id="q14-now" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">No structured monitoring or POE tools. Performance data is not collected or used.</option>
                  <option value="2">Some monitoring tools are used in isolated projects. Data collection is limited and not systematically analysed.</option>
                  <option value="3">POE and real-time monitoring systems are implemented across projects. Data is stored and used to inform improvements.</option>
                  <option value="4">Organisation uses centralised digital systems and pattern books. Insights from data drive design refinement and operational improvements.</option>
                  <option value="5">Organisation uses real-time, in-use monitoring. Real-time analytics and feedback loops inform sector-wide learning and innovation. Developed a central shared database for storing and analysing building performance data.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
            <td>
              <div class="select-container">
                <select id="q14-future" onchange="updateIndicator(this)">
                  <option value="">Select...</option>
                  <option value="1">No structured monitoring or POE tools. Performance data is not collected or used.</option>
                  <option value="2">Some monitoring tools are used in isolated projects. Data collection is limited and not systematically analysed.</option>
                  <option value="3">POE and real-time monitoring systems are implemented across projects. Data is stored and used to inform improvements.</option>
                  <option value="4">Organisation uses centralised digital systems and pattern books. Insights from data drive design refinement and operational improvements.</option>
                  <option value="5">Organisation uses real-time, in-use monitoring. Real-time analytics and feedback loops inform sector-wide learning and innovation. Developed a central shared database for storing and analysing building performance data.</option>
                </select>
                <div class="status-indicator"></div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Legend at Bottom -->
    <div class="legend">
      <div class="legend-item">
        <div class="legend-circle red"></div>
        <span>Follower</span>
      </div>
      <div class="legend-item">
        <div class="legend-circle orange"></div>
        <span>Starter</span>
      </div>
      <div class="legend-item">
        <div class="legend-circle yellow"></div>
        <span>Mature</span>
      </div>
      <div class="legend-item">
        <div class="legend-circle light-green"></div>
        <span>Leader</span>
      </div>
      <div class="legend-item">
        <div class="legend-circle dark-green"></div>
        <span>Innovator</span>
      </div>
    </div>
  </main>

  <!-- Debug Toggle Button -->
  <button class="debug-toggle" onclick="toggleDebug()">View Saved Data</button>

  <!-- Debug Panel (hidden by default) -->
  <div class="debug-panel" id="debugPanel" style="display: none;">
    <h3>Saved Values</h3>
    <div class="debug-content" id="debugContent"></div>
  </div>

  <script>
    // Load saved values when page loads
    window.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('select[id]').forEach(select => {
        const savedValue = localStorage.getItem(select.id);
        if (savedValue) {
          select.value = savedValue;
          updateIndicator(select);
        }
      });
    });

    function updateIndicator(selectElement) {
      const container = selectElement.parentElement;
      const indicator = container.querySelector('.status-indicator');
      const selectedValue = selectElement.value;
      
      // Save to localStorage
      if (selectElement.id) {
        if (selectedValue) {
          localStorage.setItem(selectElement.id, selectedValue);
        } else {
          localStorage.removeItem(selectElement.id);
        }
      }
      
      // Remove all level classes
      indicator.classList.remove('level-1', 'level-2', 'level-3', 'level-4', 'level-5', 'show');
      
      // Add new level class and show if value is selected
      if (selectedValue) {
        indicator.classList.add(`level-${selectedValue}`, 'show');
      }

      // Update debug panel if it's visible
      if (document.getElementById('debugPanel').style.display !== 'none') {
        updateDebugPanel();
      }
    }

    function toggleDebug() {
      const panel = document.getElementById('debugPanel');
      if (panel.style.display === 'none') {
        panel.style.display = 'block';
        updateDebugPanel();
      } else {
        panel.style.display = 'none';
      }
    }

    function updateDebugPanel() {
      const debugContent = document.getElementById('debugContent');
      debugContent.innerHTML = '';
      
      const savedData = {};
      document.querySelectorAll('select[id]').forEach(select => {
        const value = localStorage.getItem(select.id);
        if (value) {
          savedData[select.id] = value;
        }
      });

      if (Object.keys(savedData).length === 0) {
        debugContent.innerHTML = '<p style="color: #6c757d; font-style: italic;">No data saved yet</p>';
      } else {
        for (const [key, value] of Object.entries(savedData)) {
          const div = document.createElement('div');
          div.className = 'debug-item';
          div.innerHTML = `<strong>${key}:</strong> ${value}`;
          debugContent.appendChild(div);
        }
      }
    }

    function getAllSavedData() {
      const data = {};
      document.querySelectorAll('select[id]').forEach(select => {
        const value = localStorage.getItem(select.id);
        if (value) {
          data[select.id] = parseInt(value);
        }
      });
      return data;
    }

    window.getAllSavedData = getAllSavedData;
    console.log('Saved data:', getAllSavedData());
  </script>
</body>
</html>
